<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulado VIII - CPA20</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- Barra de progresso -->
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <!-- Bot√£o de voltar -->
  <a href="index.html" class="voltar-btn">
    <i class="fas fa-arrow-left"></i>
    <span>Voltar</span>
  </a>

  <!-- Menu de resultados fixo -->
  <div class="resultado-container" id="resultadoContainer">
    <div class="resultado-content">
      <div class="resultado-texto" id="resultadoTexto"></div>
      <div class="recomecar-btn" onclick="recomecarProva()">
        <i class="fas fa-redo"></i>
        <span>Recome√ßar</span>
      </div>
    </div>
  </div>

  <div class="container">
    <h1>Simulado VIII - CPA20</h1>
    <div id="quiz"></div>
    <button class="verificar-btn" onclick="verificarProva()">
      <i class="fas fa-check-circle"></i>
      Verificar Respostas
    </button>
  </div>

  <script>
    const todasQuestoes = [
      {
        pergunta: "O aumento da duration de Macaulay de uma carteira de investimentos tem como consequ√™ncia direta",
        alternativas: [
          "o aumento da rela√ß√£o entre o seu rating e seu risco de cr√©dito.",
          "a diminui√ß√£o da rela√ß√£o entre o seu desvio-padr√£o e sua vari√¢ncia.",
          "o aumento da sua sensibilidade √† mudan√ßas nas taxas de juros",
          "a diminui√ß√£o da varia√ß√£o do valor da carteira em rela√ß√£o ao seu benchmark."
        ],
        correta: 2
      },
      {
        pergunta: "A CPR - C√©dula de Produtor Rural",
        alternativas: [
          "n√£o pode ser negociada em mercado de balc√£o.",
          "√© garantida pela institui√ß√£o financeira, que entra como avalista na opera√ß√£o.",
          "pode ser emitida somente por bancos m√∫ltiplos",
          "√© registrada no SELIC - Sistema Especial de Liquida√ß√£o e Cust√≥dia"
        ],
        correta: 1
      },
      {
        pergunta: "Os ADRs - American Depositary Receipts s√£o",
        alternativas: [
          "t√≠tulos negociados no mercado internacional, decorrentes de exporta√ß√µes brasileiras.",
          "recibos brasileiros cujo lastro s√£o a√ß√µes de empresas estrangeiras.",
          "instrumentos negoci√°veis que representam a propriedade de a√ß√µes de companhias sediadas fora dos EUA.",
          "dep√≥sitos efetuados por cidad√£os brasileiros em bancos norte-americanos."
        ],
        correta: 2
      },
      {
        pergunta: "Ao estruturar uma empresa de gest√£o de recursos, um gestor fez as seguintes afirma√ß√µes: \nI. Tanto a an√°lise t√©cnica quanto a an√°lise fundamentalista fazem parte de processos de sele√ß√£o de a√ß√µes bottom - up. \nII. A an√°lise fundamentalista tem foco no curt√≠ssimo prazo. \nIII. A an√°lise t√©cnica acredita que futuras altera√ß√µes nos pre√ßos dos ativos podem ser detectadas pela observa√ß√£o de s√©ries hist√≥ricas.",
        alternativas: [
          "I e III, apenas",
          "I, II e III.",
          "II e III, apenas.",
          "I e lI, apenas."
        ],
        correta: 0
      },
      {
        pergunta: "Em um Fundo de Investimento em Direitos Credit√≥rios (FIDC) \nI - as cotas subordinadas possuem maiores riscos, caso os cr√©ditos n√£o sejam performados. \nII - s√£o exigidos ratings (classifica√ß√£o de risco de ag√™ncias de risco de mercado) apenas para as cotas s√™niores. \nIII - as cotas s√™niores possuem prioridade para fins de pagamento de amortiza√ß√£o e resgates. \nEst√° correto o que se afirma em: ",
        alternativas: [
          "II, apenas.",
          "I e III, apenas.",
          "II e III, apenas",
          "I, apenas."
        ],
        correta: 1
      },
      {
        pergunta: "Uma opera√ß√£o de empr√©stimo que possua um seguro que garanta a liquida√ß√£o de suas parcelas minimiza, para o doador, o risco",
        alternativas: [
          "cambial.",
          "de contraparte.",
          "de mercado.",
          "operacional."
        ],
        correta: 1
      },
      {
        pergunta: "O rito de registro autom√°tico de distribui√ß√£o previsto na Resolu√ß√£o CVM no 160/2022 √© aplic√°vel, sem condicionantes, para o caso de oferta p√∫blica subsequente de distribui√ß√£o de a√ß√µes de emissores em fase operacional destinada",
        alternativas: [
          "simultaneamente ao p√∫blico investidor em geral e investidores qualificados.",
          "exclusivamente a investidores profissionais",
          "simultaneamente a investidores profissionais e ao p√∫blico investidor em geral.",
          "exclusivamente a investidores qualificados e profissionais"
        ],
        correta: 1
      },
    ];


    let provaEntregue = false;

    function atualizarProgresso() {
      const totalQuestoes = todasQuestoes.length;
      let respondidas = 0;

      for (let i = 0; i < totalQuestoes; i++) {
        if (document.querySelector(`input[name="q${i}"]:checked`)) {
          respondidas++;
        }
      }

      const progresso = (respondidas / totalQuestoes) * 100;
      document.getElementById('progressBar').style.width = `${progresso}%`;
    }

    function carregarProva() {
      const quizContainer = document.getElementById('quiz');
      quizContainer.innerHTML = '';

      todasQuestoes.forEach((questao, index) => {
        const div = document.createElement('div');
        div.className = 'question';

        // Adiciona o n√∫mero e texto da pergunta
        const pergunta = document.createElement('p');
        pergunta.innerHTML = `<strong>Quest√£o ${index + 1}</strong> - ${questao.pergunta.replace(/\n/g, '<br>')}`;
        div.appendChild(pergunta);

        // Adiciona a imagem se existir
        if (questao.imagem) {
          const imgContainer = document.createElement('div');
          imgContainer.className = 'question-image';

          const img = document.createElement('img');
          img.src = questao.imagem;
          img.alt = 'Imagem da quest√£o';

          imgContainer.appendChild(img);
          div.appendChild(imgContainer);
        }

        // Container para alternativas
        const alternativasContainer = document.createElement('div');
        alternativasContainer.className = 'alternativas';

        // Adiciona as alternativas
        questao.alternativas.forEach((alt, i) => {
          const label = document.createElement('label');
          label.className = 'alternativa';

          const radio = document.createElement('input');
          radio.type = 'radio';
          radio.name = `q${index}`;
          radio.value = i;
          radio.onchange = atualizarProgresso;

          const textoAlternativa = document.createElement('span');
          textoAlternativa.textContent = alt;

          label.appendChild(radio);
          label.appendChild(textoAlternativa);
          alternativasContainer.appendChild(label);
        });

        div.appendChild(alternativasContainer);
        quizContainer.appendChild(div);
      });

      document.querySelectorAll('.result').forEach(el => el.remove());
      provaEntregue = false;
      // Esconde o menu de resultados ao carregar nova prova
      document.getElementById('resultadoContainer').style.display = 'none';
      // Reseta a barra de progresso
      document.getElementById('progressBar').style.width = '0%';
    }

    function verificarProva() {
      if (provaEntregue) {
        alert("Voc√™ j√° verificou esta prova.");
        return;
      }

      const respostasUsuario = [];
      let todasRespondidas = true;

      for (let i = 0; i < todasQuestoes.length; i++) {
        const selecionada = document.querySelector(`input[name="q${i}"]:checked`);
        if (selecionada) {
          respostasUsuario[i] = parseInt(selecionada.value);
        } else {
          todasRespondidas = false;
          break;
        }
      }

      if (!todasRespondidas) {
        alert("Por favor, responda todas as quest√µes antes de verificar.");
        return;
      }

      // Calcula os resultados
      let acertos = 0;
      todasQuestoes.forEach((questao, i) => {
        const correta = questao.correta;
        const respostaUsuario = respostasUsuario[i];

        if (respostaUsuario === correta) {
          acertos++;
        }
      });

      const porcentagem = ((acertos / todasQuestoes.length) * 100).toFixed(1);

      // Mostra o menu de resultados
      const resultadoContainer = document.getElementById('resultadoContainer');
      const resultadoTexto = document.getElementById('resultadoTexto');

      resultadoTexto.innerHTML = `üéØ Voc√™ acertou ${acertos} de ${todasQuestoes.length} quest√µes (${porcentagem}%)`;
      resultadoContainer.style.display = 'block';

      // Rola a p√°gina para o topo para ver o resultado
      window.scrollTo({ top: 0, behavior: 'smooth' });

      // Marca as respostas corretas/incorretas
      const quizContainer = document.getElementById('quiz');
      todasQuestoes.forEach((questao, i) => {
        const div = quizContainer.children[i];
        const correta = questao.correta;
        const respostaUsuario = respostasUsuario[i];

        const resultado = document.createElement('div');
        if (respostaUsuario === correta) {
          resultado.className = 'result correct';
          resultado.innerHTML = '<i class="fas fa-check-circle"></i> Resposta correta!';
        } else {
          resultado.className = 'result incorrect';
          resultado.innerHTML = `<i class="fas fa-times-circle"></i> Resposta incorreta. <strong>Correta:</strong> ${questao.alternativas[correta]}`;
        }
        div.appendChild(resultado);
      });

      provaEntregue = true;
    }

    function recomecarProva() {
      carregarProva();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Inicia a prova quando a p√°gina carrega
    window.onload = carregarProva;
  </script>
</body>

</html>